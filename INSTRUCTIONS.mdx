# Test de la couche validation (Zod)

### ğŸ’¡ Description longue de l'exercice

Dans cette section, tu vas tester les schÃ©mas de validation de ton application avec **Zod**. Les schÃ©mas de validation garantissent que les donnÃ©es envoyÃ©es Ã  ton service respectent les formats et contraintes attendus. Ces tests sont essentiels pour sÃ©curiser et fiabiliser la couche de validation de ton application.

Lâ€™objectif de cet exercice est de valider trois schÃ©mas principaux :

1. **`deleteProductServiceSchema`** : Validation des donnÃ©es pour la suppression dâ€™un produit.
2. **`createEditProductServiceSchema`** : Validation des donnÃ©es pour la crÃ©ation ou la modification dâ€™un produit.
3. **`updateProductServiceShema`** : Validation des donnÃ©es pour la mise Ã  jour dâ€™un produit.

Tu commenceras par tester les cas de base, comme des champs requis ou invalides, puis tu ajouteras des cas avancÃ©s dans les bonus.

## ğŸ“ Tes notes

DÃ©taille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template).

## Comprendre

Voici un exemple de schÃ©ma Zod simple pour valider un objet produit :

```jsx
javascript
CopierModifier
import {z} from 'zod'

const productSchema = z.object({
  id: z.string().uuid(),
  title: z.string().min(2, 'Title must be at least 2 characters.'),
  description: z.string().min(2, 'Description must be at least 2 characters.'),
  price: z.number(),
})
```

Le schÃ©ma ci-dessus dÃ©finit les contraintes suivantes :

- `id` doit Ãªtre une chaÃ®ne au format UUID.
- `title` doit Ãªtre une chaÃ®ne avec au moins 2 caractÃ¨res.
- `description` doit Ã©galement avoir au moins 2 caractÃ¨res.
- `price` doit Ãªtre un nombre.

ğŸ“‘ Le lien vers la doc [Zod Documentation](https://zod.dev/).

Dans cet exercice, tu utiliseras **Vitest** pour Ã©crire des tests et vÃ©rifier que ces schÃ©mas se comportent correctement.

---

## Exercice

### Tests Ã  rÃ©aliser :

1. **`deleteProductServiceSchema`** :
   - Valide un objet avec un `id` UUID.
   - Rejette un objet si l'`id` est invalide (par exemple, un nombre Ã  la place dâ€™une chaÃ®ne).
2. **`createEditProductServiceSchema`** :
   - Valide un produit avec les champs requis (`category`, `price`, `title`, `description`).
   - Rejette un produit si :
     - Le titre est trop court (moins de 2 caractÃ¨res).
     - La description est trop courte (moins de 2 caractÃ¨res).
     - Des champs requis comme `category`, `title`, ou `description` sont manquants.

### Fichiers

- `src/services/__tests__/product-validation.test.ts`

---

## Bonus

### 1. ğŸš€ Tester les champs optionnels dans `createEditProductServiceSchema`

Ajoute des tests pour valider que :

1. Les champs optionnels comme `id`, `createdAt`, et `quantity` sont acceptÃ©s.
2. Les champs numÃ©riques passÃ©s en chaÃ®ne (`"299.99"`) sont convertis en nombres.

### Fichiers

- `src/services/__tests__/product-validation.test.ts`

---

### 2. ğŸš€ Valider la mise Ã  jour avec `updateProductServiceShema`

Ajoute des tests pour valider que :

1. Les donnÃ©es sont acceptÃ©es avec un `id` valide et des champs optionnels (`createdAt`, `quantity`).
2. Les donnÃ©es sont rejetÃ©es si :
   - L'`id` est manquant.
   - L'`id` est invalide (par exemple, un nombre au lieu d'une chaÃ®ne UUID).

### Fichiers

- `src/services/__tests__/product-validation.test.ts`

---

## Aller plus loin

ğŸ“‘ Le lien vers la documentation Zod [Zod Documentation](https://zod.dev/).

---

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand tu devras simplifier ton schÃ©ma ou ton code._
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Hugo tâ€™aidera sur les spÃ©cifications des schÃ©mas._

---

## ğŸœ Feedback

Remplis le formulaire de [FeedBack](https://go.mikecodeur.com/cours-react-avis).

```jsx
jsx
CopierModifier
https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20Mastery&entry.1430994900=8.Test%20Service%20Validation&entry.533578441=05%20Validation%20Schemas

```

---

Dis-moi si

# itre principal de l'exercice

### ğŸ’¡ Description longue de l'exercice

## ğŸ“ Tes notes

Detaille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Un hello world en HTML:

```html
<html>
  <body>
    <div>Hello World</div>
  </body>
</html>
```

ğŸ“‘ Le liens vers la doc [https://fr.reactjs.org/docs/getting-started.html](https://fr.reactjs.org/docs/getting-started.html)

Des frameworks JavaScript modernes ont donc Ã©tÃ© crÃ©Ã©s pour relever certains des dÃ©fis en crÃ©ant par programme le DOM plutÃ´t que de le dÃ©finir Ã  la main HTML.

## Exercice

Il est important dâ€™avoir une comprÃ©hension de base de la faÃ§on de gÃ©nÃ©rer et dâ€™interagir avec des nÅ“uds DOM en utilisant JavaScript car cela vous aidera Ã  comprendre comment React fonctionne un peu mieux sous le capot. Donc, dans cet exercice, nous ne sommes en fait pas va utiliser React du tout. Au lieu de cela, nous allons utiliser JavaScript pour crÃ©er un `div` nÅ“ud DOM avec le texte â€œHello Worldâ€ et insÃ©rez ce nÅ“ud DOM dans le document.

Fichiers

- `exercise/about/page`

## Bonus

### 1. ğŸš€ GÃ©nÃ©rer le Root Node

PlutÃ´t que dâ€™avoir le nÅ“ud `root` dans le code HTML, voyez si vous pouvez crÃ©er celui-ci en utilisant Ã©galement JavaScript.

Fichiers

- `exercise/about/page`

### 2. ğŸš€ Bonus 2

2PlutÃ´t que dâ€™avoir le nÅ“ud `root` dans le code HTML, voyez si vous pouvez crÃ©er celui-ci en utilisant Ã©galement JavaScript.

Fichiers

- `exercise/about/page`

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://www.w3schools.com/html/html_css.asp](https://www.w3schools.com/html/html_css.asp)

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).
